/* ============================================
   üç∫ TEMA TAVERNA MEDIEVALE PIXEL ART üïØÔ∏è
   ============================================ */

/* Importa font pixel retro */
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=MedievalSharp&display=swap');

/* ============ SFONDO PRINCIPALE ============ */
[data-testid="stAppViewContainer"] {
    background: linear-gradient(
        135deg,
        #2c1810 0%,
        #3d2817 25%,
        #4a3520 50%,
        #3d2817 75%,
        #2c1810 100%
    );
    background-size: 400% 400%;
    animation: gradient-shift 20s ease infinite;
}

@keyframes gradient-shift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

/* Texture legno sovrapposta */
[data-testid="stAppViewContainer"]::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
        repeating-linear-gradient(
            90deg,
            rgba(0,0,0,0.1) 0px,
            transparent 2px,
            transparent 4px,
            rgba(0,0,0,0.1) 6px
        ),
        repeating-linear-gradient(
            0deg,
            rgba(92,64,51,0.3) 0px,
            transparent 1px,
            transparent 2px
        );
    pointer-events: none;
    z-index: 1;
}

/* ============ SIDEBAR TAVERNA ============ */
[data-testid="stSidebar"] {
    background: linear-gradient(
        180deg,
        #1a0f08 0%,
        #2d1b12 50%,
        #1a0f08 100%
    );
    border-right: 4px solid #5c4033;
    box-shadow: 
        inset -10px 0 30px rgba(0,0,0,0.5),
        4px 0 15px rgba(0,0,0,0.7);
}

/* Texture legno sidebar */
[data-testid="stSidebar"]::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: repeating-linear-gradient(
        0deg,
        rgba(92,64,51,0.2) 0px,
        transparent 2px,
        transparent 6px,
        rgba(0,0,0,0.2) 8px
    );
    pointer-events: none;
}

/* ============ TESTO E FONT ============ */
/* Titoli principali - Font medievale */
h1, h2, h3 {
    font-family: 'MedievalSharp', cursive !important;
    color: #f4e4c1 !important;
    text-shadow: 
        2px 2px 4px rgba(0,0,0,0.8),
        0 0 20px rgba(255,200,100,0.3);
    letter-spacing: 1px;
}

/* Testo normale */
p, div, span, label {
    color: #e8d4b0 !important;
    font-family: 'Georgia', serif !important;
}

/* Testo sidebar */
[data-testid="stSidebar"] * {
    color: #f4e4c1 !important;
}

/* ============ PULSANTI STILE LEGNO ============ */
button[kind="primary"],
button[kind="secondary"],
.stButton button {
    background: linear-gradient(
        145deg,
        #5c4033 0%,
        #6d4c3d 50%,
        #5c4033 100%
    ) !important;
    color: #f4e4c1 !important;
    border: 3px solid #3d2817 !important;
    border-radius: 8px !important;
    font-family: 'MedievalSharp', cursive !important;
    font-size: 14px !important;
    font-weight: bold !important;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.8) !important;
    box-shadow: 
        inset 0 2px 5px rgba(255,255,255,0.1),
        0 4px 10px rgba(0,0,0,0.5),
        0 0 15px rgba(255,140,0,0.2) !important;
    transition: all 0.3s ease !important;
}

button:hover {
    background: linear-gradient(
        145deg,
        #6d4c3d 0%,
        #7d5c4d 50%,
        #6d4c3d 100%
    ) !important;
    box-shadow: 
        inset 0 2px 5px rgba(255,255,255,0.2),
        0 6px 15px rgba(0,0,0,0.6),
        0 0 25px rgba(255,140,0,0.4) !important;
    transform: translateY(-2px) !important;
}

button:active {
    transform: translateY(0) !important;
    box-shadow: 
        inset 0 3px 8px rgba(0,0,0,0.4),
        0 2px 5px rgba(0,0,0,0.3) !important;
}

/* ============ INPUT E TEXTBOX ============ */
input, textarea, select {
    background: rgba(30,20,15,0.8) !important;
    color: #f4e4c1 !important;
    border: 2px solid #5c4033 !important;
    border-radius: 6px !important;
    padding: 8px !important;
  font-family: 'Georgia', serif !important;
    box-shadow: inset 0 2px 8px rgba(0,0,0,0.5) !important;
}

input:focus, textarea:focus {
    border-color: #d4a574 !important;
    box-shadow: 
        inset 0 2px 8px rgba(0,0,0,0.5),
        0 0 15px rgba(212,165,116,0.3) !important;
}

/* ============ CHAT MESSAGGI ============ */
[data-testid="stChatMessageContent"] {
    background: rgba(45,30,20,0.9) !important;
    border: 2px solid #5c4033 !important;
    border-radius: 10px !important;
    padding: 15px !important;
    box-shadow: 
        0 4px 15px rgba(0,0,0,0.6),
        inset 0 1px 3px rgba(255,255,255,0.05) !important;
}

/* Messaggi del giocatore */
[data-testid="stChatMessage"][data-testid*="user"] {
    background: rgba(60,45,30,0.7) !important;
}

/* Messaggi del DM */
[data-testid="stChatMessage"][data-testid*="assistant"] {
    background: rgba(40,25,15,0.7) !important;
    border-left: 4px solid #d4a574 !important;
}

/* ============ METRICS E STATS ============ */
[data-testid="metric-container"] {
    background: rgba(30,20,15,0.6) !important;
    border: 2px solid #5c4033 !important;
    border-radius: 8px !important;
    padding: 10px !important;
    box-shadow: inset 0 2px 5px rgba(0,0,0,0.4) !important;
}

[data-testid="stMetricValue"] {
    color: #ffd700 !important;
    font-weight: bold !important;
    text-shadow: 0 0 10px rgba(255,215,0,0.5) !important;
}

/* ============ PROGRESS BAR (HP) ============ */
[data-testid="stProgress"] > div > div {
    background: linear-gradient(
        90deg,
        #8b0000 0%,
        #ff4444 50%,
        #8b0000 100%
    ) !important;
    border-radius: 10px !important;
    box-shadow: 
        0 0 15px rgba(255,0,0,0.5),
        inset 0 2px 5px rgba(0,0,0,0.3) !important;
}

/* ============ EXPANDER (Inventario, ecc.) ============ */
[data-testid="stExpander"] {
    background: rgba(45,30,20,0.6) !important;
    border: 2px solid #5c4033 !important;
    border-radius: 8px !important;
}

/* ============ DIVIDER ============ */
hr {
    border-color: #5c4033 !important;
    opacity: 0.5 !important;
}

/* ============ SCROLLBAR ============ */
::-webkit-scrollbar {
    width: 12px;
    background: #2c1810;
}

::-webkit-scrollbar-thumb {
    background: linear-gradient(
        180deg,
        #5c4033 0%,
        #3d2817 100%
    );
    border-radius: 6px;
    border: 2px solid #2c1810;
}

::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(
        180deg,
        #6d4c3d 0%,
        #4a3520 100%
    );
}

/* ============ DECORAZIONI TAVERNA ============ */
/* Bordo superiore effetto travi */
[data-testid="stHeader"] {
    background: linear-gradient(
        180deg,
        #1a0f08 0%,
        #2d1b12 100%
    ) !important;
    border-bottom: 4px solid #5c4033 !important;
    box-shadow: 0 4px 15px rgba(0,0,0,0.7) !important;
}

/* ============ ANIMAZIONE FIAMMA CANDELA ============ */
@keyframes flame-dance {
    0%, 100% { 
        transform: scaleY(1) scaleX(1);
        filter: hue-rotate(0deg);
    }
    25% { 
        transform: scaleY(1.1) scaleX(0.95);
        filter: hue-rotate(5deg);
    }
    50% { 
        transform: scaleY(0.95) scaleX(1.05);
        filter: hue-rotate(-5deg);
    }
    75% { 
        transform: scaleY(1.05) scaleX(0.98);
        filter: hue-rotate(3deg);
    }
}

/* ============ GLOW EFFETTI ============ */
.stAlert {
    background: rgba(45,30,20,0.9) !important;
    border-left: 4px solid #d4a574 !important;
    box-shadow: 0 0 20px rgba(212,165,116,0.2) !important;
}

/* ============ RESPONSIVE ============ */
@media (max-width: 768px) {
    h1 { font-size: 24px !important; }
    h2 { font-size: 20px !important; }
    h3 { font-size: 16px !important; }
}
/* ============ NASCONDI ELEMENTI TECNICI ============ */

/* Nascondi icone espander (frecce, keyboard_double_arrow, ecc.) */
[data-testid="stExpander"] svg,
[data-testid="stExpander"] [data-testid="stIconMaterial"] {
    display: none !important;
}

/* Nascondi icone sidebar */
[data-testid="stSidebar"] svg[data-testid="stIconMaterial"] {
    display: none !important;
}

/* Nascondi l'icona "keyboard_double_arrow" */
button[title*="Close sidebar"] svg,
button[title*="Open sidebar"] svg {
    display: none !important;
}

/* Nascondi tutti gli span con testo tecnico */
span[data-baseweb="tag"] {
    display: none !important;
}

/* Nascondi icone chevron (frecce) */
svg[data-testid="stIconChevronDown"],
svg[data-testid="stIconChevronUp"] {
    display: none !important;
}

/* Nascondi label visibility collapsed */
[data-testid="stRadio"] label {
    font-size: 0 !important;
}

[data-testid="stRadio"] label span {
    font-size: 16px !important;
}
/* Sostituisci frecce con simboli medievali */
[data-testid="stExpander"] summary::before {
    content: "‚öîÔ∏è ";
    font-size: 16px;
    margin-right: 8px;
}

[data-testid="stExpander"][aria-expanded="true"] summary::before {
    content: "üó°Ô∏è ";
}